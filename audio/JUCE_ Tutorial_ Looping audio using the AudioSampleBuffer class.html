<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0070)https://docs.juce.com/master/tutorial_looping_audio_sample_buffer.html -->
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta http-equiv="X-UA-Compatible" content="IE=9">
<meta name="generator" content="Doxygen 1.11.0">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>JUCE: Tutorial: Looping audio using the AudioSampleBuffer class</title>
<link href="./JUCE_ Tutorial_ Looping audio using the AudioSampleBuffer class_files/tabs.css" rel="stylesheet" type="text/css">
<script type="text/javascript" src="./JUCE_ Tutorial_ Looping audio using the AudioSampleBuffer class_files/jquery.js"></script>
<script type="text/javascript" src="./JUCE_ Tutorial_ Looping audio using the AudioSampleBuffer class_files/dynsections.js"></script>
<link href="./JUCE_ Tutorial_ Looping audio using the AudioSampleBuffer class_files/navtree.css" rel="stylesheet" type="text/css">
<script type="text/javascript" src="./JUCE_ Tutorial_ Looping audio using the AudioSampleBuffer class_files/resize.js"></script>
<script type="text/javascript" src="./JUCE_ Tutorial_ Looping audio using the AudioSampleBuffer class_files/cookie.js"></script>
<link href="./JUCE_ Tutorial_ Looping audio using the AudioSampleBuffer class_files/search.css" rel="stylesheet" type="text/css">
<script type="text/javascript" src="./JUCE_ Tutorial_ Looping audio using the AudioSampleBuffer class_files/searchdata.js"></script>
<script type="text/javascript" src="./JUCE_ Tutorial_ Looping audio using the AudioSampleBuffer class_files/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="./JUCE_ Tutorial_ Looping audio using the AudioSampleBuffer class_files/doxygen.css" rel="stylesheet" type="text/css">
<link rel="apple-touch-icon" sizes="180x180" href="https://docs.juce.com/favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://docs.juce.com/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://docs.juce.com/favicons/favicon-16x16.png">
<link rel="manifest" href="https://docs.juce.com/favicons/site.webmanifest">
<link rel="mask-icon" href="https://docs.juce.com/favicons/safari-pinned-tab.svg" color="#5bbad5">
<link rel="shortcut icon" href="https://docs.juce.com/favicons/favicon.ico">
<meta name="msapplication-TileColor" content="#2b5797">
<meta name="msapplication-config" content="../favicons/browserconfig.xml">
<meta name="theme-color" content="#ffffff">
<link rel="preload" as="style" href="./JUCE_ Tutorial_ Looping audio using the AudioSampleBuffer class_files/css">
<link rel="stylesheet" href="./JUCE_ Tutorial_ Looping audio using the AudioSampleBuffer class_files/css">
<script src="./JUCE_ Tutorial_ Looping audio using the AudioSampleBuffer class_files/script.js" site="COHIAING" defer=""></script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
  <header id="_header-4-13" class="oxy-header-wrapper oxy-overlay-header oxy-header"><div id="_header_row-5-13" class="oxy-header-row"><div class="oxy-header-container"><div id="_header_left-6-13" class="oxy-header-left"><a id="link-7-13" class="ct-link" href="https://juce.com/"><img id="image-8-13" alt="JUCE Logo" src="./JUCE_ Tutorial_ Looping audio using the AudioSampleBuffer class_files/JUCE-logo-horiz-ondark.png" class="ct-image"></a></div><div id="_header_center-9-13" class="oxy-header-center"></div><div id="_header_right-10-13" class="oxy-header-right"><nav id="_nav_menu-11-13" class="oxy-nav-menu oxy-nav-menu-dropdowns oxy-nav-menu-dropdown-arrow oxy-nav-menu-responsive-dropdowns"><div class="oxy-menu-toggle"><div class="oxy-nav-menu-hamburger-wrap"><div class="oxy-nav-menu-hamburger"><div class="oxy-nav-menu-hamburger-line"></div><div class="oxy-nav-menu-hamburger-line"></div><div class="oxy-nav-menu-hamburger-line"></div></div></div></div><div class="menu-main-menu-container"><ul id="menu-main-menu" class="oxy-nav-menu-list"><li id="menu-item-290" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-290"><a href="https://juce.com/juce/whats-new/">Discover</a>
    <ul class="sub-menu">
        <li id="menu-item-254" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-254"><a href="https://juce.com/juce/whats-new/">What's New</a></li>
        <li id="menu-item-252" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-252"><a href="https://juce.com/juce/features/">Features</a></li>
    </ul>
    </li>
    <li id="menu-item-291" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-291"><a href="https://juce.com/learn/documentation/">Learn</a>
    <ul class="sub-menu">
        <li id="menu-item-241" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-241"><a href="https://juce.com/learn/documentation/">Documentation</a></li>
        <li id="menu-item-240" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-240"><a href="https://juce.com/learn/tutorials/">Tutorials</a></li>
        <li id="menu-item-275" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-275"><a href="https://juce.com/stories/">Made with JUCE</a></li>
        <li id="menu-item-242" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-242"><a href="https://juce.com/resources/">Resources</a></li>
    </ul>
    </li>
    <li id="menu-item-230" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-230"><a href="https://forum.juce.com/">Forum</a></li>
    </ul></div></nav><a id="link-28-13" class="ct-link" href="https://account.juce.com/account/dashboard" target="_self"><div id="fancy_icon-27-13" class="ct-fancy-icon"><svg id="svg-fancy_icon-27-13"><use xlink:href="#FontAwesomeicon-user-circle"></use></svg></div></a><a id="link_button-23-13" class="ct-link-button " href="https://juce.com/get-juce/">Get JUCE</a></div></div></div></header>
    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="position: absolute; width: 0; height: 0; overflow: hidden;" version="1.1"><defs><symbol id="FontAwesomeicon-user-circle" viewBox="0 0 28 28"><title>user-circle</title><path d="M23.797 20.922c-0.406-2.922-1.594-5.516-4.25-5.875-1.375 1.5-3.359 2.453-5.547 2.453s-4.172-0.953-5.547-2.453c-2.656 0.359-3.844 2.953-4.25 5.875 2.172 3.063 5.75 5.078 9.797 5.078s7.625-2.016 9.797-5.078zM20 10c0-3.313-2.688-6-6-6s-6 2.688-6 6 2.688 6 6 6 6-2.688 6-6zM28 14c0 7.703-6.25 14-14 14-7.734 0-14-6.281-14-14 0-7.734 6.266-14 14-14s14 6.266 14 14z"></path></symbol></defs></svg>
    <script type="text/javascript">
        jQuery(document).ready(function() {
            jQuery('body').on('click', '.oxy-menu-toggle', function() {
                jQuery(this).parent('.oxy-nav-menu').toggleClass('oxy-nav-menu-open');
                jQuery('body').toggleClass('oxy-nav-menu-prevent-overflow');
                jQuery('html').toggleClass('oxy-nav-menu-prevent-overflow');
            });
            var selector = '.oxy-nav-menu-open .menu-item a[href*="#"]';
            jQuery('body').on('click', selector, function(){
                jQuery('.oxy-nav-menu-open').removeClass('oxy-nav-menu-open');
                jQuery('body').removeClass('oxy-nav-menu-prevent-overflow');
                jQuery('html').removeClass('oxy-nav-menu-prevent-overflow');
                jQuery(this).click();
            });
        });
    </script>
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="https://docs.juce.com/master/index.html"><span>Tags</span></a></li>
      <li><a href="https://docs.juce.com/master/topics.html"><span>JUCE&nbsp;Modules</span></a></li>
      <li><a href="https://docs.juce.com/master/classes.html"><span>Alphabetical</span></a></li>
      <li><a href="https://juce.com/learn/tutorials"><span>Tutorials</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect" onmouseover="return searchBox.OnSearchSelectShow()" onmouseout="return searchBox.OnSearchSelectHide()" tabindex="0">&nbsp;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S" onfocus="searchBox.OnSearchFieldFocus(true)" onblur="searchBox.OnSearchFieldFocus(false)" onkeyup="searchBox.OnSearchFieldChange(event)">
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="./JUCE_ Tutorial_ Looping audio using the AudioSampleBuffer class_files/close.svg" alt=""></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow" onmouseover="return searchBox.OnSearchSelectShow()" onmouseout="return searchBox.OnSearchSelectHide()" onkeydown="return searchBox.OnSearchSelectKey(event)" tabindex="0">
<a class="SelectItem" onclick="searchBox.OnSelectItem(0)" href="javascript:void(0)"><span class="SelectionMark">•</span>All</a><a class="SelectItem" onclick="searchBox.OnSelectItem(1)" href="javascript:void(0)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" onclick="searchBox.OnSelectItem(2)" href="javascript:void(0)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" onclick="searchBox.OnSelectItem(3)" href="javascript:void(0)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" onclick="searchBox.OnSelectItem(4)" href="javascript:void(0)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" onclick="searchBox.OnSelectItem(5)" href="javascript:void(0)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" onclick="searchBox.OnSelectItem(6)" href="javascript:void(0)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" onclick="searchBox.OnSelectItem(7)" href="javascript:void(0)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" onclick="searchBox.OnSelectItem(8)" href="javascript:void(0)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" onclick="searchBox.OnSelectItem(9)" href="javascript:void(0)"><span class="SelectionMark">&nbsp;</span>Friends</a><a class="SelectItem" onclick="searchBox.OnSelectItem(10)" href="javascript:void(0)"><span class="SelectionMark">&nbsp;</span>Macros</a><a class="SelectItem" onclick="searchBox.OnSelectItem(11)" href="javascript:void(0)"><span class="SelectionMark">&nbsp;</span>Modules</a><a class="SelectItem" onclick="searchBox.OnSelectItem(12)" href="javascript:void(0)"><span class="SelectionMark">&nbsp;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div id="doc-content" style="height: 807.891px;">
<div><div class="header">
  <div class="headertitle"><div class="title">Tutorial: Looping audio using the AudioSampleBuffer class</div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="https://docs.juce.com/master/tutorial_looping_audio_sample_buffer.html#tutorial_looping_audio_sample_buffer_getting_started">Getting started</a></li>
<li class="level1"><a href="https://docs.juce.com/master/tutorial_looping_audio_sample_buffer.html#tutorial_looping_audio_sample_buffer_demo_project">The demo project</a></li>
<li class="level1"><a href="https://docs.juce.com/master/tutorial_looping_audio_sample_buffer.html#tutorial_looping_audio_sample_buffer_loading_sample_data_into_memory">Loading sample data into memory</a><ul><li class="level2"><a href="https://docs.juce.com/master/tutorial_looping_audio_sample_buffer.html#tutorial_looping_audio_sample_buffer_why_the_length_limit">Why the length limit?</a></li>
<li class="level2"><a href="https://docs.juce.com/master/tutorial_looping_audio_sample_buffer.html#tutorial_looping_audio_sample_buffer_reading_the_sound_file">Reading the sound file</a></li>
</ul>
</li>
<li class="level1"><a href="https://docs.juce.com/master/tutorial_looping_audio_sample_buffer.html#tutorial_looping_audio_sample_buffer_processing_the_audio">Processing the audio</a></li>
<li class="level1"><a href="https://docs.juce.com/master/tutorial_looping_audio_sample_buffer.html#tutorial_looping_audio_sample_buffer_multithreading_issues">Multithreading issues</a></li>
<li class="level1"><a href="https://docs.juce.com/master/tutorial_looping_audio_sample_buffer.html#tutorial_looping_audio_sample_buffer_notes">Notes</a></li>
<li class="level1"><a href="https://docs.juce.com/master/tutorial_looping_audio_sample_buffer.html#tutorial_looping_audio_sample_buffer_summary">Summary</a></li>
<li class="level1"><a href="https://docs.juce.com/master/tutorial_looping_audio_sample_buffer.html#tutorial_looping_audio_sample_buffer_see_also">See also</a></li>
</ul>
</div>
<div class="textblock"><p>This tutorial shows how to play and loop audio stored in an AudioSampleBuffer object. This is a useful basis for sampling applications that manipulate recorded audio data.</p>
<p><span class="headerlabel">Level:</span> Intermediate</p>
<p><span class="headerlabel">Platforms:</span> Windows , macOS , Linux</p>
<p><span class="headerlabel">Classes:</span> <a class="el" href="https://docs.juce.com/master/classAudioBuffer.html" title="A multi-channel buffer containing floating point audio samples.">AudioBuffer</a>, <a class="el" href="https://docs.juce.com/master/classAudioFormatReader.html" title="Reads samples from an audio file stream.">AudioFormatReader</a>, <a class="el" href="https://docs.juce.com/master/classAudioAppComponent.html" title="A base class for writing audio apps that stream from the audio i/o devices.">AudioAppComponent</a></p>
<h1><a class="anchor" id="tutorial_looping_audio_sample_buffer_getting_started"></a>
Getting started</h1>
<dl class="section note"><dt>Note</dt><dd>This tutorial assumes you have already completed <a class="el" href="https://docs.juce.com/master/tutorial_simple_synth_noise.html">Tutorial: Build a white noise generator</a> and <a class="el" href="https://docs.juce.com/master/tutorial_playing_sound_files.html">Tutorial: Build an audio player</a>. If not, you should look at these first.</dd></dl>
<p>Download the demo project for this tutorial here: <a href="https://docs.juce.com/tutorials/PIPs/LoopingAudioSampleBufferTutorial.zip">PIP</a> | <a href="https://docs.juce.com/tutorials/ZIPs/LoopingAudioSampleBufferTutorial.zip">ZIP</a> . Unzip the project and open the first header file in the Projucer.</p>
<p>If you need help with this step, see <a class="el" href="https://docs.juce.com/master/tutorial_new_projucer_project.html">Tutorial: Projucer Part 1: Getting started with the Projucer</a>.</p>
<h1><a class="anchor" id="tutorial_looping_audio_sample_buffer_demo_project"></a>
The demo project</h1>
<p>The demo project for this tutorial allows the user to open a sound file, read the whole file into an <a class="el" href="https://docs.juce.com/master/group__juce__audio__basics-buffers.html#gab339ebab0d3b10c91c0d47c8fd2e50d2">AudioSampleBuffer</a> object, and play it in a loop. In <a class="el" href="https://docs.juce.com/master/tutorial_playing_sound_files.html">Tutorial: Build an audio player</a> we played sound files using an <a class="el" href="https://docs.juce.com/master/classAudioFormatReaderSource.html" title="A type of AudioSource that will read from an AudioFormatReader.">AudioFormatReaderSource</a> object connected to an <a class="el" href="https://docs.juce.com/master/classAudioTransportSource.html" title="An AudioSource that takes a PositionableAudioSource and allows it to be played, stopped,...">AudioTransportSource</a> object to play the sound. Looping is possible using this method by enabling enabling the <a class="el" href="https://docs.juce.com/master/classAudioFormatReaderSource.html" title="A type of AudioSource that will read from an AudioFormatReader.">AudioFormatReaderSource</a> object's looping flag — using the <a class="el" href="https://docs.juce.com/master/classAudioFormatReaderSource.html#a15d8af211ce8cfcbc0c4aaac143b303e" title="Toggles loop-mode.">AudioFormatReaderSource::setLooping()</a> function.</p>
<p>All of the code relevant to the discussion in this tutorial is in the <code class="project_code">MainContentComponent</code> class of the demo project.</p>
<h1><a class="anchor" id="tutorial_looping_audio_sample_buffer_loading_sample_data_into_memory"></a>
Loading sample data into memory</h1>
<p>There are many cases where it is probably better to use the built-in classes for sound file playback. There may be occasions where you need to do this yourself and this tutorial gives an introduction to some of the techniques. Sampler applications commonly load the sound file data into memory like this, especially when the sounds are relatively short (see the <a class="el" href="https://docs.juce.com/master/classSamplerSound.html" title="A subclass of SynthesiserSound that represents a sampled audio clip.">SamplerSound</a> class for an example). Synthesising sounds can also be achieved by storing a wavetable in an <a class="el" href="https://docs.juce.com/master/group__juce__audio__basics-buffers.html#gab339ebab0d3b10c91c0d47c8fd2e50d2">AudioSampleBuffer</a> object and looping it at an appropriate rate to produce the required musical pitch. This is explored in <a class="el" href="https://docs.juce.com/master/tutorial_wavetable_synth.html">Tutorial: Wavetable synthesis</a>.</p>
<p>This tutorial also highlights some of the potential multi-threading issues you may encounter when combining access to files, and audio processing on the audio thread. Some of these problems seem simple on the surface but often require carefully applied techniques in order to avoid crashes and audio glitches. These techniques are explored further in <a class="el" href="https://docs.juce.com/master/tutorial_looping_audio_sample_buffer_advanced.html">Tutorial: Looping audio using the AudioSampleBuffer class (advanced)</a>.</p>
<h2><a class="anchor" id="tutorial_looping_audio_sample_buffer_why_the_length_limit"></a>
Why the length limit?</h2>
<p>The demo project limits the length of the sound file you can load to less than 2 seconds. This limit is rather arbitrary, but this is broadly for two reasons:</p>
<ol type="1">
<li>If the whole file is very large then your computer might run out of physical memory. In a real application, of course, you would be able to use a much higher limit. A 2-second stereo audio file, at a sample rate of 44.1kHz, loaded into an <a class="el" href="https://docs.juce.com/master/group__juce__audio__basics-buffers.html#gab339ebab0d3b10c91c0d47c8fd2e50d2">AudioSampleBuffer</a> object, will only occupy 705,600 bytes of memory. (See notes)</li>
<li>Loading even quite short files doesn't take a trivial amount of time.</li>
</ol>
<p>Regarding point 1: if we exceed the amount of physical memory the computer has, it may start to use virtual memory (that is, secondary storage such as a hard drive). This rather defeats the purpose of loading the data into memory in the first place! Of course the operation may just fail on some devices if it runs out of memory.</p>
<p>Regarding point 2: we keep the example simple by loading the audio data directly in, after the <a class="el" href="https://docs.juce.com/master/classFileChooser.html#a546ef74bcd139b67a90e4459cd591d21" title="Shows a dialog box to choose a file to open.">FileChooser::browseForFileToOpen()</a> function has returned the file selected by the user. This means that the <em>message thread</em> will be blocked until all of the audio has been read in from disk into the <a class="el" href="https://docs.juce.com/master/group__juce__audio__basics-buffers.html#gab339ebab0d3b10c91c0d47c8fd2e50d2">AudioSampleBuffer</a> object. Even with short sounds we should really do this on a background thread to keep the user interface as responsive as possible for the user. For long sounds the delay and unresponsiveness will be very noticeable. Adding another (background) thread would add to the complexity of this example. See <a class="el" href="https://docs.juce.com/master/tutorial_looping_audio_sample_buffer_advanced.html">Tutorial: Looping audio using the AudioSampleBuffer class (advanced)</a> for example of how to load files on a background thread in this way.</p>
<dl class="section attention">
<dt>Exercise</dt>
<dd>To keep it simple, demo project doesn't report an error if you try to load a longer file — it just fails. Adding error reporting like this is left for you as an additional exercise. </dd>
</dl>
<h2><a class="anchor" id="tutorial_looping_audio_sample_buffer_reading_the_sound_file"></a>
Reading the sound file</h2>
<p>When the user clicks the <b class="onscreen_text">Open...</b> button they are presented with a file chooser. The whole file is then read into an <a class="el" href="https://docs.juce.com/master/group__juce__audio__basics-buffers.html#gab339ebab0d3b10c91c0d47c8fd2e50d2">AudioSampleBuffer</a> member <code class="project_code">fileBuffer</code> in our <code class="project_code">MainContentComponent</code> class.</p>
<div class="fragment"><div class="line">    <span class="keywordtype">void</span> openButtonClicked()</div>
<div class="line">    {</div>
<div class="line">        shutdownAudio();                                                                            <span class="comment">// [1]</span></div>
<div class="line"> </div>
<div class="line">        chooser = std::make_unique&lt;juce::FileChooser&gt; (<span class="stringliteral">"Select a Wave file shorter than 2 seconds to play..."</span>,</div>
<div class="line">                                                       juce::File{},</div>
<div class="line">                                                       <span class="stringliteral">"*.wav"</span>);</div>
<div class="line">        <span class="keyword">auto</span> chooserFlags = juce::FileBrowserComponent::openMode</div>
<div class="line">                          | juce::FileBrowserComponent::canSelectFiles;</div>
<div class="line"> </div>
<div class="line">        chooser-&gt;launchAsync (chooserFlags, [<span class="keyword">this</span>] (<span class="keyword">const</span> juce::FileChooser&amp; fc)</div>
<div class="line">        {</div>
<div class="line">            <span class="keyword">auto</span> file = fc.getResult();</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (file == juce::File{})</div>
<div class="line">                <span class="keywordflow">return</span>;</div>
<div class="line"> </div>
<div class="line">            std::unique_ptr&lt;juce::AudioFormatReader&gt; reader (formatManager.createReaderFor (file)); <span class="comment">// [2]</span></div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (reader.get() != <span class="keyword">nullptr</span>)</div>
<div class="line">            {</div>
<div class="line">                <span class="keyword">auto</span> duration = (float) reader-&gt;lengthInSamples / reader-&gt;sampleRate;               <span class="comment">// [3]</span></div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">if</span> (duration &lt; 2)</div>
<div class="line">                {</div>
<div class="line">                    fileBuffer.setSize ((<span class="keywordtype">int</span>) reader-&gt;numChannels, (<span class="keywordtype">int</span>) reader-&gt;lengthInSamples);  <span class="comment">// [4]</span></div>
<div class="line">                    reader-&gt;read (&amp;fileBuffer,                                                      <span class="comment">// [5]</span></div>
<div class="line">                                  0,                                                                <span class="comment">//  [5.1]</span></div>
<div class="line">                                  (<span class="keywordtype">int</span>) reader-&gt;lengthInSamples,                                    <span class="comment">//  [5.2]</span></div>
<div class="line">                                  0,                                                                <span class="comment">//  [5.3]</span></div>
<div class="line">                                  <span class="keyword">true</span>,                                                             <span class="comment">//  [5.4]</span></div>
<div class="line">                                  <span class="keyword">true</span>);                                                            <span class="comment">//  [5.5]</span></div>
<div class="line">                    position = 0;                                                                   <span class="comment">// [6]</span></div>
<div class="line">                    setAudioChannels (0, (<span class="keywordtype">int</span>) reader-&gt;numChannels);                                <span class="comment">// [7]</span></div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">else</span></div>
<div class="line">                {</div>
<div class="line">                    <span class="comment">// handle the error that the file is 2 seconds or longer..</span></div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">        });</div>
<div class="line">    }</div>
</div><!-- fragment --><ul>
<li><span class="comment">[1]</span> : Notice that we shut down the audio system for the <a class="el" href="https://docs.juce.com/master/classAudioAppComponent.html" title="A base class for writing audio apps that stream from the audio i/o devices.">AudioAppComponent</a> object each time we open a new file. This is to avoid some of the multithreading issues hinted at already. Once the audio system is shut down, there is no danger that our <code class="project_code">getNextAudioBlock()</code> function will be called on the <em>audio thread</em> while we are still within the call to the <a class="el" href="https://docs.juce.com/master/classButton.html#a30b76ab312dc7f66e67596ae20540ec2" title="You can assign a lambda to this callback object to have it called when the button is clicked.">Button::onClick</a> lambda function (which will have called this <code class="project_code">openButtonClicked()</code> function from the <em>message thread</em>).</li>
<li><span class="comment">[2]</span> : Here we create the <a class="el" href="https://docs.juce.com/master/classAudioFormatReader.html" title="Reads samples from an audio file stream.">AudioFormatReader</a> object using the <a class="el" href="https://docs.juce.com/master/classAudioFormatManager.html" title="A class for keeping a list of available audio formats, and for deciding which one to use to open a gi...">AudioFormatManager</a> object. Notice that we store this in a std::unique_ptr object as we need to manage this object ourselves. (In <a class="el" href="https://docs.juce.com/master/tutorial_playing_sound_files.html">Tutorial: Build an audio player</a> we pass the <a class="el" href="https://docs.juce.com/master/classAudioFormatReader.html" title="Reads samples from an audio file stream.">AudioFormatReader</a> object to the <a class="el" href="https://docs.juce.com/master/classAudioFormatReaderSource.html" title="A type of AudioSource that will read from an AudioFormatReader.">AudioFormatReaderSource</a> object to manage for for us.) This operation may fail to create the reader object, therefore we have to check that the <code class="project_code">reader</code> pointer is not a <code class="code">nullptr</code> value on the next line.</li>
<li><span class="comment">[3]</span> : This is where we calculate the duration of the sound file by dividing the length of the file in samples by its sample rate. We check that this is less that 2 seconds on the next line.</li>
<li><span class="comment">[4]</span> : Here we resize the <a class="el" href="https://docs.juce.com/master/group__juce__audio__basics-buffers.html#gab339ebab0d3b10c91c0d47c8fd2e50d2">AudioSampleBuffer</a> object by calling the <a class="el" href="https://docs.juce.com/master/classAudioBuffer.html#a4434de94aa03d7db6d7ef06977ddf0ac">AudioSampleBuffer::setSize()</a> function using the number of channels and length from the <a class="el" href="https://docs.juce.com/master/classAudioFormatReader.html" title="Reads samples from an audio file stream.">AudioFormatReader</a> object.</li>
<li><span class="comment">[5]</span> : This reads the audio data from the <a class="el" href="https://docs.juce.com/master/classAudioFormatReader.html" title="Reads samples from an audio file stream.">AudioFormatReader</a> object into our <a class="el" href="https://docs.juce.com/master/group__juce__audio__basics-buffers.html#gab339ebab0d3b10c91c0d47c8fd2e50d2">AudioSampleBuffer</a> <code class="project_code">fileBuffer</code> member using the <a class="el" href="https://docs.juce.com/master/classAudioFormatReader.html#ad180e2b06c2a10c0ca399c3231b155c0">AudioFormatReader::read()</a> function. The arguments are:<ul>
<li><span class="comment">[5.1]</span> : The destination start sample in the <a class="el" href="https://docs.juce.com/master/group__juce__audio__basics-buffers.html#gab339ebab0d3b10c91c0d47c8fd2e50d2">AudioSampleBuffer</a> object where the data will start to be written.</li>
<li><span class="comment">[5.2]</span> : The number of samples to read.</li>
<li><span class="comment">[5.3]</span> : The start samples in the <a class="el" href="https://docs.juce.com/master/classAudioFormatReader.html" title="Reads samples from an audio file stream.">AudioFormatReader</a> object where reading will start.</li>
<li><span class="comment">[5.4]</span> : For stereo (or other two-channel) files this flag indicates whether to read the left channel.</li>
<li><span class="comment">[5.5]</span> : For stereo files this flag indicates whether to read the right channel.</li>
</ul>
</li>
<li><span class="comment">[6]</span> : We need to store the most recent read position within our buffer as we play it. This resets our <code class="project_code">position</code> member to zero.</li>
<li><span class="comment">[7]</span> : This starts the audio system back up again. Here we have an opportunity to use the number of channels in the sound file to try and configure our audio device with the same number of channels.</li>
</ul>
<h1><a class="anchor" id="tutorial_looping_audio_sample_buffer_processing_the_audio"></a>
Processing the audio</h1>
<p>In the <code class="project_code">getNextAudioBlock()</code> function the appropriate number of samples is read from our <code class="project_code">fileBuffer</code> <a class="el" href="https://docs.juce.com/master/group__juce__audio__basics-buffers.html#gab339ebab0d3b10c91c0d47c8fd2e50d2">AudioSampleBuffer</a> member and written out the the <a class="el" href="https://docs.juce.com/master/group__juce__audio__basics-buffers.html#gab339ebab0d3b10c91c0d47c8fd2e50d2">AudioSampleBuffer</a> object in the <a class="el" href="https://docs.juce.com/master/structAudioSourceChannelInfo.html" title="Used by AudioSource::getNextAudioBlock().">AudioSourceChannelInfo</a> struct.</p>
<p>While reading the audio data from the file we keep track of the current read position using the <code class="project_code">position</code> member (being careful to update it after all the channels of the audio have been processed for the specified block of samples):</p>
<div class="fragment"><div class="line">    <span class="keywordtype">void</span> getNextAudioBlock (<span class="keyword">const</span> juce::AudioSourceChannelInfo&amp; bufferToFill)<span class="keyword"> override</span></div>
<div class="line"><span class="keyword">    </span>{</div>
<div class="line">        <span class="keyword">auto</span> numInputChannels = fileBuffer.getNumChannels();</div>
<div class="line">        <span class="keyword">auto</span> numOutputChannels = bufferToFill.buffer-&gt;getNumChannels();</div>
<div class="line"> </div>
<div class="line">        <span class="keyword">auto</span> outputSamplesRemaining = bufferToFill.numSamples;                                  <span class="comment">// [8]</span></div>
<div class="line">        <span class="keyword">auto</span> outputSamplesOffset = bufferToFill.startSample;                                    <span class="comment">// [9]</span></div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">while</span> (outputSamplesRemaining &gt; 0)</div>
<div class="line">        {</div>
<div class="line">            <span class="keyword">auto</span> bufferSamplesRemaining = fileBuffer.getNumSamples() - position;                <span class="comment">// [10]</span></div>
<div class="line">            <span class="keyword">auto</span> samplesThisTime = juce::jmin (outputSamplesRemaining, bufferSamplesRemaining); <span class="comment">// [11]</span></div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">for</span> (<span class="keyword">auto</span> channel = 0; channel &lt; numOutputChannels; ++channel)</div>
<div class="line">            {</div>
<div class="line">                bufferToFill.buffer-&gt;copyFrom (channel,                                         <span class="comment">// [12]</span></div>
<div class="line">                                               outputSamplesOffset,                             <span class="comment">//  [12.1]</span></div>
<div class="line">                                               fileBuffer,                                      <span class="comment">//  [12.2]</span></div>
<div class="line">                                               channel % numInputChannels,                      <span class="comment">//  [12.3]</span></div>
<div class="line">                                               position,                                        <span class="comment">//  [12.4]</span></div>
<div class="line">                                               samplesThisTime);                                <span class="comment">//  [12.5]</span></div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            outputSamplesRemaining -= samplesThisTime;                                          <span class="comment">// [13]</span></div>
<div class="line">            outputSamplesOffset += samplesThisTime;                                             <span class="comment">// [14]</span></div>
<div class="line">            position += samplesThisTime;                                                        <span class="comment">// [15]</span></div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (position == fileBuffer.getNumSamples())</div>
<div class="line">                position = 0;                                                                   <span class="comment">// [16]</span></div>
<div class="line">        }</div>
<div class="line">    }</div>
</div><!-- fragment --><ul>
<li><span class="comment">[8]</span> : The <code class="project_code">outputSamplesRemaining</code> variable stores the total number of samples that the <code class="project_code">getNextAudioBlock()</code> function needs to output taking a copy from the <a class="el" href="https://docs.juce.com/master/structAudioSourceChannelInfo.html" title="Used by AudioSource::getNextAudioBlock().">AudioSourceChannelInfo</a> struct. We use this to check if we need to exit the <code class="code">while()</code> loop that starts on the next line.</li>
<li><span class="comment">[9]</span> : We also take a copy of the <a class="el" href="https://docs.juce.com/master/structAudioSourceChannelInfo.html#a42e88ccc05d4893015e2415785390259" title="The first sample in the buffer from which the callback is expected to write data.">AudioSourceChannelInfo::startSample</a> value to use as our offset within the destination buffer.</li>
<li><span class="comment">[10]</span> : Here we calculate how many samples are left in the buffer from which we are reading.</li>
<li><span class="comment">[11]</span> : For this pass of the <code class="code">while()</code> loop we need to output the smaller of the remaining samples for this call to the <code class="project_code">getNextAudioBlock()</code> function and the remaining samples in the buffer — using the <a class="el" href="https://docs.juce.com/master/group__juce__core-maths.html#gae8394cdf11279b266f4aa741758c1669">jmin()</a> function. If this is less than the total number of samples for this call to the <code class="project_code">getNextAudioBlock()</code> function, then there will be one more pass of the <code class="code">while()</code> loop, before exiting.</li>
<li><span class="comment">[12]</span> : For each output channel we use the <a class="el" href="https://docs.juce.com/master/classAudioBuffer.html#a9ec751bfa23564c011bf3940ca17b743">AudioSampleBuffer::copyFrom()</a> function to copy sections of data from one channel of one buffer to a channel of another buffer. Here we specify the destination channel index.<ul>
<li><span class="comment">[12.1]</span> : This is the sample offset within the destination buffer.</li>
<li><span class="comment">[12.2]</span> : This is the source <a class="el" href="https://docs.juce.com/master/group__juce__audio__basics-buffers.html#gab339ebab0d3b10c91c0d47c8fd2e50d2">AudioSampleBuffer</a> object from which to copy.</li>
<li><span class="comment">[12.3]</span> : This is the channel index of the source buffer. In case the source buffer has fewer channels than our destination buffer we use this modulo calculation. For example, a mono source buffer will mean that this always results in zero, copying the same data to each of the output channels.</li>
<li><span class="comment">[12.4]</span> : This is the position to start reading from in the source buffer.</li>
<li><span class="comment">[12.5]</span> : The number of samples to read that we calculated earlier.</li>
</ul>
</li>
<li><span class="comment">[13]</span> : Now deduct the number of samples we just processed from the <code class="project_code">outputSamplesRemaining</code> variable.</li>
<li><span class="comment">[14]</span> : Increment the <code class="project_code">outputSamplesOffset</code> by the same amount in case we have another pass of the <code class="code">while()</code> loop.</li>
<li><span class="comment">[15]</span> : Offset our <code class="project_code">position</code> member by the same amount too.</li>
<li><span class="comment">[16]</span> : Finally, check if the <code class="project_code">position</code> member reached the end of the <code class="project_code">fileBuffer</code> <a class="el" href="https://docs.juce.com/master/group__juce__audio__basics-buffers.html#gab339ebab0d3b10c91c0d47c8fd2e50d2">AudioSampleBuffer</a> object and reset it to zero to form the loop if necessary.</li>
</ul>
<dl class="section attention">
<dt>Exercise</dt>
<dd>Add a level slider to control the audio playback level of the audio file (see <a class="el" href="https://docs.juce.com/master/tutorial_synth_level_control.html">Tutorial: Control audio levels</a>). You can use the <a class="el" href="https://docs.juce.com/master/classAudioBuffer.html#a9ffc61d339e455d4bddc7cf055a63ee3">AudioSampleBuffer::applyGain()</a> or <a class="el" href="https://docs.juce.com/master/classAudioBuffer.html#ab0542e5b626b36087f0054e795695682">AudioSampleBuffer::applyGainRamp()</a> functions to apply the gain to the data in an <a class="el" href="https://docs.juce.com/master/group__juce__audio__basics-buffers.html#gab339ebab0d3b10c91c0d47c8fd2e50d2">AudioSampleBuffer</a> object. </dd>
</dl>
<h1><a class="anchor" id="tutorial_looping_audio_sample_buffer_multithreading_issues"></a>
Multithreading issues</h1>
<p>As discussed previously, this tutorial avoids multithreading issues by shutting down and restarting audio each time the user clicks the <b class="onscreen_text">Open...</b> button. But what if we didn't do this — what could happen? There many things that could go wrong, all of which have to do with the fact that both the <code class="project_code">getNextAudioBlock()</code> and <code class="project_code">openButtonClicked()</code> functions could be running at the same time in different threads. Here are some examples:</p>
<ul>
<li>Let's say that the application is already playing an audio file and the user clicks the <b class="onscreen_text">Open...</b> button and chooses a new file. Suppose the audio thread interrupts this function between <span class="comment">[4]</span> and <span class="comment">[5]</span> . The buffer has been resized but the data hasn't been written to the buffer. The buffer may still contain audio data from the previous file but it depends whether the memory for the buffer needed to be moved when it was resized. In any case we'll probably get a glitch.</li>
<li>It's possible that the <code class="project_code">getNextAudioBlock()</code> function could be interrupted by code in the <code class="project_code">openButtonClicked()</code> function. Suppose this happens just after <span class="comment">[11]</span> and that the <code class="project_code">openButtonClicked()</code> function has just reached <span class="comment">[4]</span> . The buffer might be resized to be shorter than it was but we already calculated our starting point a few lines earlier. This could lead to a memory access error and the application could crash.</li>
<li>The <code class="project_code">getNextAudioBlock()</code> function could be interrupted while calling the <a class="el" href="https://docs.juce.com/master/classAudioBuffer.html#a9ec751bfa23564c011bf3940ca17b743">AudioSampleBuffer::copyFrom()</a> function. Again depending in the implementation of this we could end up accessing memory that we shouldn't.</li>
</ul>
<dl class="section warning"><dt>Warning</dt><dd>There are a number of other things that could go wrong. You may be familiar with using a <a href="https://en.wikipedia.org/wiki/Critical_section">critical section</a> to synchronise memory access between threads. This is just one possible solution but care should be taken using a <a href="https://en.wikipedia.org/wiki/Critical_section">critical section</a> in audio code as it can lead to <a href="https://en.wikipedia.org/wiki/Priority_inversion">priority inversion</a> which could cause audio drop outs. We look at a solution that avoids critical sections in <a class="el" href="https://docs.juce.com/master/tutorial_looping_audio_sample_buffer_advanced.html">Tutorial: Looping audio using the AudioSampleBuffer class (advanced)</a>.</dd></dl>
<h1><a class="anchor" id="tutorial_looping_audio_sample_buffer_notes"></a>
Notes</h1>
<p>Two seconds of stereo audio at 44.1kHz would use 705,600 bytes in an AudioSampleBuffer object because there are:</p><ul>
<li>2 channels</li>
<li>2 seconds</li>
<li>44,100 samples</li>
<li>4 bytes-per-sample (using the <code class="code">float</code> type)</li>
</ul>
<p>Multiply these together and the result is: <span style="font-family: times; font-style: italic">2 x 2 x 44100 x 4 = 705600</span></p>
<h1><a class="anchor" id="tutorial_looping_audio_sample_buffer_summary"></a>
Summary</h1>
<p>In this tutorial we have introduced:</p>
<ul>
<li>How to read audio data directly from a sound file.</li>
<li>How to copy the data into a buffer for playback.</li>
<li>The basis for simple sampler applications and synthesisers using wavetable buffers.</li>
<li>Some of the potential multithreading issues that exist in audio applications.</li>
</ul>
<h1><a class="anchor" id="tutorial_looping_audio_sample_buffer_see_also"></a>
See also</h1>
<ul>
<li><a class="el" href="https://docs.juce.com/master/tutorial_playing_sound_files.html">Tutorial: Build an audio player</a></li>
<li><a class="el" href="https://docs.juce.com/master/tutorial_processing_audio_input.html">Tutorial: Processing audio input</a></li>
<li><a class="el" href="https://docs.juce.com/master/tutorial_audio_thumbnail.html">Tutorial: Draw audio waveforms</a></li>
<li><a class="el" href="https://docs.juce.com/master/tutorial_looping_audio_sample_buffer_advanced.html">Tutorial: Looping audio using the AudioSampleBuffer class (advanced)</a> </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<section id="section-10-81" class=" ct-section juce-sitemap"><div class="ct-section-inner-wrap"><div id="div_block-11-81" class="ct-div-block"><div id="new_columns-12-81" class="ct-new-columns"><div id="div_block-13-81" class="ct-div-block"><h3 id="headline-15-81" class="ct-headline ">Purchase</h3><a id="link_text-17-81" class="ct-link-text" href="https://juce.com/get-juce/">Get JUCE</a><h3 id="headline-20-81" class="ct-headline mt-xlrg">Discover</h3><a id="link_text-21-81" class="ct-link-text" href="https://juce.com/juce/whats-new/" target="_self">What's New in JUCE</a><a id="link_text-22-81" class="ct-link-text" href="https://juce.com/juce/features/" target="_self">Features</a><h3 id="headline-25-81" class="ct-headline mt-xlrg">Learn</h3><a id="link_text-27-81" class="ct-link-text" href="https://juce.com/learn/documentation/">Documentaion</a><a id="link_text-26-81" class="ct-link-text" href="https://juce.com/learn/tutorials/">Tutorials</a><a id="link_text-24-81" class="ct-link-text" href="https://juce.com/stories/" target="_self">Made with JUCE</a><a id="link_text-29-127" class="ct-link-text" href="https://juce.com/resources/" target="_self">Resources</a></div><div id="div_block-14-81" class="ct-div-block"><h3 id="headline-28-81" class="ct-headline">Support</h3><a id="link_text-31-81" class="ct-link-text" href="https://forum.juce.com/" target="_self">JUCE Forum</a><a class="ct-link-text" href="https://juce.com/newsletter" target="_self">Newsletter</a><a id="link_text-30-127" class="ct-link-text" href="https://juce.com/archive/">Archive</a><h3 id="headline-32-81" class="ct-headline mt-xlrg">About</h3><a id="link_text-29-81" class="ct-link-text" href="https://juce.com/contact-us/">Contact Us</a><a id="link_text-34-81" class="ct-link-text" href="https://juce.com/juce-legal/">JUCE Legal</a><a id="link_text-30-81" class="ct-link-text" href="https://juce.com/get-juce">JUCE Licensing FAQ</a><h3 id="headline-33-81" class="ct-headline mt-xlrg">Events</h3><a id="link_text-35-81" class="ct-link-text" href="https://audio.dev/" target="_blank">Audio Developer Conference</a></div><div id="div_block-38-81" class="ct-div-block"></div></div></div></div></section>
<section id="section-13-13" class=" ct-section"><div class="ct-section-inner-wrap"><div id="new_columns-14-13" class="ct-new-columns"><div id="div_block-20-13" class="ct-div-block"><div id="_social_icons-22-13" class="oxy-social-icons"><a href="https://www.facebook.com/jucelibrary" target="_blank" class="oxy-social-icons-facebook"><svg><title>Visit our Facebook</title><use xlink:href="#oxy-social-icons-icon-facebook"></use></svg></a><a href="https://twitter.com/jucelibrary" target="_blank" class="oxy-social-icons-twitter"><svg><title>Visit our Twitter</title><use xlink:href="#oxy-social-icons-icon-twitter"></use></svg></a><a href="https://www.linkedin.com/company/juce-c-/" target="_blank" class="oxy-social-icons-linkedin"><svg><title>Visit our LinkedIn</title><use xlink:href="#oxy-social-icons-icon-linkedin"></use></svg></a><a href="https://www.youtube.com/c/JUCElibrary" target="_blank" class="oxy-social-icons-youtube"><svg><title>Visit our YouTube channel</title><use xlink:href="#oxy-social-icons-icon-youtube"></use></svg></a></div></div><div id="div_block-17-13" class="ct-div-block"><a id="link-18-13" class="ct-link" href="https://juce.com/"><img id="image-19-13" alt="JUCE Logo" src="./JUCE_ Tutorial_ Looping audio using the AudioSampleBuffer class_files/JUCE-logo-horiz-ondark.png" class="ct-image"></a></div><div id="div_block-15-13" class="ct-div-block"><div id="text_block-32-13" class="ct-text-block">© Raw Material Software Limited</div></div></div></div></section>
<svg style="position: absolute; width: 0; height: 0; overflow: hidden;" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
   <defs>
      <symbol id="oxy-social-icons-icon-linkedin" viewBox="0 0 32 32">
         <title>linkedin</title>
         <path d="M12 12h5.535v2.837h0.079c0.77-1.381 2.655-2.837 5.464-2.837 5.842 0 6.922 3.637 6.922 8.367v9.633h-5.769v-8.54c0-2.037-0.042-4.657-3.001-4.657-3.005 0-3.463 2.218-3.463 4.509v8.688h-5.767v-18z"></path>
         <path d="M2 12h6v18h-6v-18z"></path>
         <path d="M8 7c0 1.657-1.343 3-3 3s-3-1.343-3-3c0-1.657 1.343-3 3-3s3 1.343 3 3z"></path>
      </symbol>
      <symbol id="oxy-social-icons-icon-facebook" viewBox="0 0 32 32">
         <title>facebook</title>
         <path d="M19 6h5v-6h-5c-3.86 0-7 3.14-7 7v3h-4v6h4v16h6v-16h5l1-6h-6v-3c0-0.542 0.458-1 1-1z"></path>
      </symbol>
      <symbol id="oxy-social-icons-icon-pinterest" viewBox="0 0 32 32">
         <title>pinterest</title>
         <path d="M16 2.138c-7.656 0-13.863 6.206-13.863 13.863 0 5.875 3.656 10.887 8.813 12.906-0.119-1.094-0.231-2.781 0.050-3.975 0.25-1.081 1.625-6.887 1.625-6.887s-0.412-0.831-0.412-2.056c0-1.925 1.119-3.369 2.506-3.369 1.181 0 1.756 0.887 1.756 1.95 0 1.188-0.756 2.969-1.15 4.613-0.331 1.381 0.688 2.506 2.050 2.506 2.462 0 4.356-2.6 4.356-6.35 0-3.319-2.387-5.638-5.787-5.638-3.944 0-6.256 2.956-6.256 6.019 0 1.194 0.456 2.469 1.031 3.163 0.113 0.137 0.131 0.256 0.094 0.4-0.106 0.438-0.338 1.381-0.387 1.575-0.063 0.256-0.2 0.306-0.463 0.188-1.731-0.806-2.813-3.337-2.813-5.369 0-4.375 3.175-8.387 9.156-8.387 4.806 0 8.544 3.425 8.544 8.006 0 4.775-3.012 8.625-7.194 8.625-1.406 0-2.725-0.731-3.175-1.594 0 0-0.694 2.644-0.863 3.294-0.313 1.206-1.156 2.712-1.725 3.631 1.3 0.4 2.675 0.619 4.106 0.619 7.656 0 13.863-6.206 13.863-13.863 0-7.662-6.206-13.869-13.863-13.869z"></path>
      </symbol>
      <symbol id="oxy-social-icons-icon-youtube" viewBox="0 0 32 32">
         <title>youtube</title>
         <path d="M31.681 9.6c0 0-0.313-2.206-1.275-3.175-1.219-1.275-2.581-1.281-3.206-1.356-4.475-0.325-11.194-0.325-11.194-0.325h-0.012c0 0-6.719 0-11.194 0.325-0.625 0.075-1.987 0.081-3.206 1.356-0.963 0.969-1.269 3.175-1.269 3.175s-0.319 2.588-0.319 5.181v2.425c0 2.587 0.319 5.181 0.319 5.181s0.313 2.206 1.269 3.175c1.219 1.275 2.819 1.231 3.531 1.369 2.563 0.244 10.881 0.319 10.881 0.319s6.725-0.012 11.2-0.331c0.625-0.075 1.988-0.081 3.206-1.356 0.962-0.969 1.275-3.175 1.275-3.175s0.319-2.587 0.319-5.181v-2.425c-0.006-2.588-0.325-5.181-0.325-5.181zM12.694 20.15v-8.994l8.644 4.513-8.644 4.481z"></path>
      </symbol>
      <symbol id="oxy-social-icons-icon-rss" viewBox="0 0 32 32">
         <title>rss</title>
         <path d="M4.259 23.467c-2.35 0-4.259 1.917-4.259 4.252 0 2.349 1.909 4.244 4.259 4.244 2.358 0 4.265-1.895 4.265-4.244-0-2.336-1.907-4.252-4.265-4.252zM0.005 10.873v6.133c3.993 0 7.749 1.562 10.577 4.391 2.825 2.822 4.384 6.595 4.384 10.603h6.16c-0-11.651-9.478-21.127-21.121-21.127zM0.012 0v6.136c14.243 0 25.836 11.604 25.836 25.864h6.152c0-17.64-14.352-32-31.988-32z"></path>
      </symbol>
      <symbol id="oxy-social-icons-icon-twitter" viewBox="0 0 32 32">
         <title>twitter</title>
         <path d="M32 7.075c-1.175 0.525-2.444 0.875-3.769 1.031 1.356-0.813 2.394-2.1 2.887-3.631-1.269 0.75-2.675 1.3-4.169 1.594-1.2-1.275-2.906-2.069-4.794-2.069-3.625 0-6.563 2.938-6.563 6.563 0 0.512 0.056 1.012 0.169 1.494-5.456-0.275-10.294-2.888-13.531-6.862-0.563 0.969-0.887 2.1-0.887 3.3 0 2.275 1.156 4.287 2.919 5.463-1.075-0.031-2.087-0.331-2.975-0.819 0 0.025 0 0.056 0 0.081 0 3.181 2.263 5.838 5.269 6.437-0.55 0.15-1.131 0.231-1.731 0.231-0.425 0-0.831-0.044-1.237-0.119 0.838 2.606 3.263 4.506 6.131 4.563-2.25 1.762-5.075 2.813-8.156 2.813-0.531 0-1.050-0.031-1.569-0.094 2.913 1.869 6.362 2.95 10.069 2.95 12.075 0 18.681-10.006 18.681-18.681 0-0.287-0.006-0.569-0.019-0.85 1.281-0.919 2.394-2.075 3.275-3.394z"></path>
      </symbol>
      <symbol id="oxy-social-icons-icon-instagram" viewBox="0 0 32 32">
         <title>instagram</title>
         <path d="M16 2.881c4.275 0 4.781 0.019 6.462 0.094 1.563 0.069 2.406 0.331 2.969 0.55 0.744 0.288 1.281 0.638 1.837 1.194 0.563 0.563 0.906 1.094 1.2 1.838 0.219 0.563 0.481 1.412 0.55 2.969 0.075 1.688 0.094 2.194 0.094 6.463s-0.019 4.781-0.094 6.463c-0.069 1.563-0.331 2.406-0.55 2.969-0.288 0.744-0.637 1.281-1.194 1.837-0.563 0.563-1.094 0.906-1.837 1.2-0.563 0.219-1.413 0.481-2.969 0.55-1.688 0.075-2.194 0.094-6.463 0.094s-4.781-0.019-6.463-0.094c-1.563-0.069-2.406-0.331-2.969-0.55-0.744-0.288-1.281-0.637-1.838-1.194-0.563-0.563-0.906-1.094-1.2-1.837-0.219-0.563-0.481-1.413-0.55-2.969-0.075-1.688-0.094-2.194-0.094-6.463s0.019-4.781 0.094-6.463c0.069-1.563 0.331-2.406 0.55-2.969 0.288-0.744 0.638-1.281 1.194-1.838 0.563-0.563 1.094-0.906 1.838-1.2 0.563-0.219 1.412-0.481 2.969-0.55 1.681-0.075 2.188-0.094 6.463-0.094zM16 0c-4.344 0-4.887 0.019-6.594 0.094-1.7 0.075-2.869 0.35-3.881 0.744-1.056 0.412-1.95 0.956-2.837 1.85-0.894 0.888-1.438 1.781-1.85 2.831-0.394 1.019-0.669 2.181-0.744 3.881-0.075 1.713-0.094 2.256-0.094 6.6s0.019 4.887 0.094 6.594c0.075 1.7 0.35 2.869 0.744 3.881 0.413 1.056 0.956 1.95 1.85 2.837 0.887 0.887 1.781 1.438 2.831 1.844 1.019 0.394 2.181 0.669 3.881 0.744 1.706 0.075 2.25 0.094 6.594 0.094s4.888-0.019 6.594-0.094c1.7-0.075 2.869-0.35 3.881-0.744 1.050-0.406 1.944-0.956 2.831-1.844s1.438-1.781 1.844-2.831c0.394-1.019 0.669-2.181 0.744-3.881 0.075-1.706 0.094-2.25 0.094-6.594s-0.019-4.887-0.094-6.594c-0.075-1.7-0.35-2.869-0.744-3.881-0.394-1.063-0.938-1.956-1.831-2.844-0.887-0.887-1.781-1.438-2.831-1.844-1.019-0.394-2.181-0.669-3.881-0.744-1.712-0.081-2.256-0.1-6.6-0.1v0z"></path>
         <path d="M16 7.781c-4.537 0-8.219 3.681-8.219 8.219s3.681 8.219 8.219 8.219 8.219-3.681 8.219-8.219c0-4.537-3.681-8.219-8.219-8.219zM16 21.331c-2.944 0-5.331-2.387-5.331-5.331s2.387-5.331 5.331-5.331c2.944 0 5.331 2.387 5.331 5.331s-2.387 5.331-5.331 5.331z"></path>
         <path d="M26.462 7.456c0 1.060-0.859 1.919-1.919 1.919s-1.919-0.859-1.919-1.919c0-1.060 0.859-1.919 1.919-1.919s1.919 0.859 1.919 1.919z"></path>
      </symbol>
      <symbol id="oxy-social-icons-icon-facebook-blank" viewBox="0 0 32 32">
         <title>facebook-blank</title>
         <path d="M29 0h-26c-1.65 0-3 1.35-3 3v26c0 1.65 1.35 3 3 3h13v-14h-4v-4h4v-2c0-3.306 2.694-6 6-6h4v4h-4c-1.1 0-2 0.9-2 2v2h6l-1 4h-5v14h9c1.65 0 3-1.35 3-3v-26c0-1.65-1.35-3-3-3z"></path>
      </symbol>
      <symbol id="oxy-social-icons-icon-rss-blank" viewBox="0 0 32 32">
         <title>rss-blank</title>
         <path d="M29 0h-26c-1.65 0-3 1.35-3 3v26c0 1.65 1.35 3 3 3h26c1.65 0 3-1.35 3-3v-26c0-1.65-1.35-3-3-3zM8.719 25.975c-1.5 0-2.719-1.206-2.719-2.706 0-1.488 1.219-2.712 2.719-2.712 1.506 0 2.719 1.225 2.719 2.712 0 1.5-1.219 2.706-2.719 2.706zM15.544 26c0-2.556-0.994-4.962-2.794-6.762-1.806-1.806-4.2-2.8-6.75-2.8v-3.912c7.425 0 13.475 6.044 13.475 13.475h-3.931zM22.488 26c0-9.094-7.394-16.5-16.481-16.5v-3.912c11.25 0 20.406 9.162 20.406 20.413h-3.925z"></path>
      </symbol>
      <symbol id="oxy-social-icons-icon-linkedin-blank" viewBox="0 0 32 32">
         <title>linkedin-blank</title>
         <path d="M29 0h-26c-1.65 0-3 1.35-3 3v26c0 1.65 1.35 3 3 3h26c1.65 0 3-1.35 3-3v-26c0-1.65-1.35-3-3-3zM12 26h-4v-14h4v14zM10 10c-1.106 0-2-0.894-2-2s0.894-2 2-2c1.106 0 2 0.894 2 2s-0.894 2-2 2zM26 26h-4v-8c0-1.106-0.894-2-2-2s-2 0.894-2 2v8h-4v-14h4v2.481c0.825-1.131 2.087-2.481 3.5-2.481 2.488 0 4.5 2.238 4.5 5v9z"></path>
      </symbol>
      <symbol id="oxy-social-icons-icon-pinterest-blank" viewBox="0 0 32 32">
         <title>pinterest</title>
         <path d="M16 2.138c-7.656 0-13.863 6.206-13.863 13.863 0 5.875 3.656 10.887 8.813 12.906-0.119-1.094-0.231-2.781 0.050-3.975 0.25-1.081 1.625-6.887 1.625-6.887s-0.412-0.831-0.412-2.056c0-1.925 1.119-3.369 2.506-3.369 1.181 0 1.756 0.887 1.756 1.95 0 1.188-0.756 2.969-1.15 4.613-0.331 1.381 0.688 2.506 2.050 2.506 2.462 0 4.356-2.6 4.356-6.35 0-3.319-2.387-5.638-5.787-5.638-3.944 0-6.256 2.956-6.256 6.019 0 1.194 0.456 2.469 1.031 3.163 0.113 0.137 0.131 0.256 0.094 0.4-0.106 0.438-0.338 1.381-0.387 1.575-0.063 0.256-0.2 0.306-0.463 0.188-1.731-0.806-2.813-3.337-2.813-5.369 0-4.375 3.175-8.387 9.156-8.387 4.806 0 8.544 3.425 8.544 8.006 0 4.775-3.012 8.625-7.194 8.625-1.406 0-2.725-0.731-3.175-1.594 0 0-0.694 2.644-0.863 3.294-0.313 1.206-1.156 2.712-1.725 3.631 1.3 0.4 2.675 0.619 4.106 0.619 7.656 0 13.863-6.206 13.863-13.863 0-7.662-6.206-13.869-13.863-13.869z"></path>
      </symbol>
      <symbol id="oxy-social-icons-icon-youtube-blank" viewBox="0 0 32 32">
         <title>youtube</title>
         <path d="M31.681 9.6c0 0-0.313-2.206-1.275-3.175-1.219-1.275-2.581-1.281-3.206-1.356-4.475-0.325-11.194-0.325-11.194-0.325h-0.012c0 0-6.719 0-11.194 0.325-0.625 0.075-1.987 0.081-3.206 1.356-0.963 0.969-1.269 3.175-1.269 3.175s-0.319 2.588-0.319 5.181v2.425c0 2.587 0.319 5.181 0.319 5.181s0.313 2.206 1.269 3.175c1.219 1.275 2.819 1.231 3.531 1.369 2.563 0.244 10.881 0.319 10.881 0.319s6.725-0.012 11.2-0.331c0.625-0.075 1.988-0.081 3.206-1.356 0.962-0.969 1.275-3.175 1.275-3.175s0.319-2.587 0.319-5.181v-2.425c-0.006-2.588-0.325-5.181-0.325-5.181zM12.694 20.15v-8.994l8.644 4.513-8.644 4.481z"></path>
      </symbol>
      <symbol id="oxy-social-icons-icon-twitter-blank" viewBox="0 0 32 32">
         <title>twitter</title>
         <path d="M32 7.075c-1.175 0.525-2.444 0.875-3.769 1.031 1.356-0.813 2.394-2.1 2.887-3.631-1.269 0.75-2.675 1.3-4.169 1.594-1.2-1.275-2.906-2.069-4.794-2.069-3.625 0-6.563 2.938-6.563 6.563 0 0.512 0.056 1.012 0.169 1.494-5.456-0.275-10.294-2.888-13.531-6.862-0.563 0.969-0.887 2.1-0.887 3.3 0 2.275 1.156 4.287 2.919 5.463-1.075-0.031-2.087-0.331-2.975-0.819 0 0.025 0 0.056 0 0.081 0 3.181 2.263 5.838 5.269 6.437-0.55 0.15-1.131 0.231-1.731 0.231-0.425 0-0.831-0.044-1.237-0.119 0.838 2.606 3.263 4.506 6.131 4.563-2.25 1.762-5.075 2.813-8.156 2.813-0.531 0-1.050-0.031-1.569-0.094 2.913 1.869 6.362 2.95 10.069 2.95 12.075 0 18.681-10.006 18.681-18.681 0-0.287-0.006-0.569-0.019-0.85 1.281-0.919 2.394-2.075 3.275-3.394z"></path>
      </symbol>
      <symbol id="oxy-social-icons-icon-instagram-blank" viewBox="0 0 32 32">
         <title>instagram</title>
         <path d="M16 2.881c4.275 0 4.781 0.019 6.462 0.094 1.563 0.069 2.406 0.331 2.969 0.55 0.744 0.288 1.281 0.638 1.837 1.194 0.563 0.563 0.906 1.094 1.2 1.838 0.219 0.563 0.481 1.412 0.55 2.969 0.075 1.688 0.094 2.194 0.094 6.463s-0.019 4.781-0.094 6.463c-0.069 1.563-0.331 2.406-0.55 2.969-0.288 0.744-0.637 1.281-1.194 1.837-0.563 0.563-1.094 0.906-1.837 1.2-0.563 0.219-1.413 0.481-2.969 0.55-1.688 0.075-2.194 0.094-6.463 0.094s-4.781-0.019-6.463-0.094c-1.563-0.069-2.406-0.331-2.969-0.55-0.744-0.288-1.281-0.637-1.838-1.194-0.563-0.563-0.906-1.094-1.2-1.837-0.219-0.563-0.481-1.413-0.55-2.969-0.075-1.688-0.094-2.194-0.094-6.463s0.019-4.781 0.094-6.463c0.069-1.563 0.331-2.406 0.55-2.969 0.288-0.744 0.638-1.281 1.194-1.838 0.563-0.563 1.094-0.906 1.838-1.2 0.563-0.219 1.412-0.481 2.969-0.55 1.681-0.075 2.188-0.094 6.463-0.094zM16 0c-4.344 0-4.887 0.019-6.594 0.094-1.7 0.075-2.869 0.35-3.881 0.744-1.056 0.412-1.95 0.956-2.837 1.85-0.894 0.888-1.438 1.781-1.85 2.831-0.394 1.019-0.669 2.181-0.744 3.881-0.075 1.713-0.094 2.256-0.094 6.6s0.019 4.887 0.094 6.594c0.075 1.7 0.35 2.869 0.744 3.881 0.413 1.056 0.956 1.95 1.85 2.837 0.887 0.887 1.781 1.438 2.831 1.844 1.019 0.394 2.181 0.669 3.881 0.744 1.706 0.075 2.25 0.094 6.594 0.094s4.888-0.019 6.594-0.094c1.7-0.075 2.869-0.35 3.881-0.744 1.050-0.406 1.944-0.956 2.831-1.844s1.438-1.781 1.844-2.831c0.394-1.019 0.669-2.181 0.744-3.881 0.075-1.706 0.094-2.25 0.094-6.594s-0.019-4.887-0.094-6.594c-0.075-1.7-0.35-2.869-0.744-3.881-0.394-1.063-0.938-1.956-1.831-2.844-0.887-0.887-1.781-1.438-2.831-1.844-1.019-0.394-2.181-0.669-3.881-0.744-1.712-0.081-2.256-0.1-6.6-0.1v0z"></path>
         <path d="M16 7.781c-4.537 0-8.219 3.681-8.219 8.219s3.681 8.219 8.219 8.219 8.219-3.681 8.219-8.219c0-4.537-3.681-8.219-8.219-8.219zM16 21.331c-2.944 0-5.331-2.387-5.331-5.331s2.387-5.331 5.331-5.331c2.944 0 5.331 2.387 5.331 5.331s-2.387 5.331-5.331 5.331z"></path>
         <path d="M26.462 7.456c0 1.060-0.859 1.919-1.919 1.919s-1.919-0.859-1.919-1.919c0-1.060 0.859-1.919 1.919-1.919s1.919 0.859 1.919 1.919z"></path>
      </symbol>
   </defs>
</svg>
</div></body></html>